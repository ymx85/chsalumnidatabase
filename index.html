<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHS College Resource Database</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#1e40af',
                        secondary: '#bfdbfe',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        
        /* Card Hover Animation */
        .person-card {
            transition: all 0.2s ease;
        }
        .person-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* Fade In Animation */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animated-card {
            opacity: 0;
            animation: fadeInUp 0.4s ease-out forwards;
        }

        /* Modal Animation */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transform: scale(0.95);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .modal-show .modal-content {
            transform: scale(1);
            opacity: 1;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">

    <!-- HEADER -->
    <header class="bg-white shadow-md sticky top-0 z-40 py-6 px-4">
        <div class="max-w-7xl mx-auto flex flex-col items-center text-center">
            <img
                src="https://resources.finalsite.net/images/f_auto,q_auto/v1668797119/ccsk12inus/awfkuopbc2f6uupyira9/CarmelHighSchoolLogo.png"
                alt="CHS Greyhound Logo"
                class="h-16 w-auto mb-3 cursor-pointer hover:opacity-80 transition-opacity"
                onerror="this.style.display='none'"
                onclick="showWelcomeModal()"
            />
            <h1 class="text-2xl md:text-3xl font-extrabold text-blue-800">
                CHS College Resource Database
            </h1>
            <p class="text-gray-500 mt-1 text-sm italic">
                Real data from CHS Alumni to help guide your application journey.
            </p>

            <!-- Filter Controls -->
            <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-3 w-full max-w-4xl">
                <div class="flex flex-col w-full sm:w-auto">
                    <select id="college-select" onchange="filterAlumni()" class="p-2 border border-blue-200 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white text-gray-700 text-sm w-full min-w-[200px]">
                        <option value="">All Colleges</option>
                        <!-- Populated by JS -->
                    </select>
                </div>

                <div class="flex flex-col w-full sm:w-auto">
                    <select id="major-select" onchange="filterAlumni()" class="p-2 border border-blue-200 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white text-gray-700 text-sm w-full min-w-[200px]">
                        <option value="">All Majors</option>
                        <!-- Populated by JS -->
                    </select>
                </div>

                <button onclick="resetFilters()" class="w-full sm:w-auto bg-blue-800 text-white font-semibold py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition duration-150 flex items-center justify-center gap-2">
                    <i class="fas fa-undo text-xs"></i> Reset
                </button>
            </div>
        </div>
    </header>

    <!-- MAIN GRID -->
    <main class="max-w-7xl mx-auto p-4 md:p-8">
        <div id="alumni-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8">
            <!-- Cards injected here -->
        </div>
        <div id="no-results" class="hidden text-center py-20">
            <p class="text-xl text-gray-500">No alumni match the current filters.</p>
            <button onclick="resetFilters()" class="mt-4 text-blue-600 hover:underline">Clear Filters</button>
        </div>
    </main>

    <!-- WELCOME MODAL -->
    <div id="welcome-modal" class="fixed inset-0 bg-black/75 hidden items-center justify-center p-4 z-50 modal-overlay">
        <div class="bg-amber-100 rounded-xl shadow-2xl p-6 md:p-8 w-full max-w-sm sm:max-w-md border-t-8 border-amber-600 modal-content">
            <h2 class="text-2xl font-extrabold mb-4 text-center text-amber-800">
                A Thank You to Our Alumni <span role="img" aria-label="confetti">ðŸŽ‰</span>
            </h2>
            <p class="text-gray-700 leading-relaxed mb-6 text-center">
                This project exists thanks to the amazing support of CHS alumni. Thank you to everyone who shared their stats, stories, and adviceâ€”and for continuing to guide future Greyhounds for years to come.
            </p>
            <button onclick="closeWelcomeModal()" class="w-full bg-amber-500 text-white font-semibold py-3 rounded-lg shadow-md hover:bg-amber-600 transition duration-150">
                Continue to Database
            </button>
        </div>
    </div>

    <!-- PROFILE MODAL -->
    <div id="profile-modal" class="fixed inset-0 bg-black/75 hidden items-center justify-center p-4 z-50 backdrop-blur-sm modal-overlay" onclick="handleClickOutside(event)">
        
        <!-- Navigation Buttons -->
        <button id="nav-prev" onclick="prevProfile(event)" class="absolute left-4 top-1/2 -translate-y-1/2 z-[60] w-10 h-10 rounded-full flex items-center justify-center text-white transition-all bg-blue-800/80 hover:bg-blue-900">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button id="nav-next" onclick="nextProfile(event)" class="absolute right-4 top-1/2 -translate-y-1/2 z-[60] w-10 h-10 rounded-full flex items-center justify-center text-white transition-all bg-blue-800/80 hover:bg-blue-900">
            <i class="fas fa-chevron-right"></i>
        </button>

        <div class="bg-white rounded-xl shadow-2xl w-full max-w-5xl p-6 md:p-10 max-h-[90vh] overflow-y-auto modal-content relative">
            
            <!-- Header -->
            <div class="flex justify-between items-start mb-6 border-b-2 border-blue-100 pb-4">
                <div class="flex items-center">
                    <!-- Avatar -->
                    <div id="modal-avatar-container" class="w-20 h-20 rounded-full overflow-hidden flex-shrink-0 mr-4 border-[3px] border-blue-200 flex items-center justify-center bg-gray-200 relative">
                        <!-- Img injected via JS -->
                    </div>
                    
                    <div>
                        <h2 id="modal-name" class="text-2xl md:text-3xl font-bold text-gray-800"></h2>
                        <p class="text-lg font-semibold mt-1 text-blue-800">
                            <span id="modal-college"></span> <span class="text-blue-800" id="modal-year"></span>
                        </p>
                        <p id="modal-major" class="text-base text-gray-500 italic"></p>
                    </div>
                </div>
                <button onclick="closeProfileModal()" class="text-gray-400 hover:text-blue-700 transition-colors p-1 rounded-full">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>

            <!-- Content Grid -->
            <div class="space-y-6">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 pb-6 border-b border-gray-200">
                    
                    <!-- Column 1: Academics -->
                    <div class="lg:border-r lg:border-gray-100 lg:pr-6">
                        <h3 class="text-xl font-bold text-blue-800 mb-3 pb-2 flex items-center border-b border-blue-50">
                            <i class="fas fa-chart-bar mr-2"></i> Academics
                        </h3>
                        <div class="text-gray-700 space-y-2 text-sm md:text-base">
                            <div class="flex justify-between">
                                <span class="font-medium">GPA (Weighted):</span>
                                <span class="font-semibold" id="modal-gpa"></span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium" id="modal-test-label">SAT/ACT:</span>
                                <span class="font-semibold" id="modal-test-score"></span>
                            </div>
                        </div>

                        <div id="modal-class-recs" class="mt-4 p-3 bg-gray-50 rounded-lg text-sm text-gray-600 italic border-l-4 border-gray-200 hidden">
                            <!-- Class Recs -->
                        </div>

                        <h3 class="text-xl font-bold text-blue-800 mb-3 pb-2 mt-6 flex items-center border-b border-blue-50">
                            <i class="fas fa-user-tie mr-2"></i> Recommenders
                        </h3>
                        <ul id="modal-recommenders" class="space-y-2">
                            <!-- Recommenders List -->
                        </ul>
                    </div>

                    <!-- Column 2: Activities -->
                    <div class="lg:border-r lg:border-gray-100 lg:pr-6">
                        <h3 class="text-xl font-bold text-blue-800 mb-3 pb-2 flex items-center border-b border-blue-50">
                            <i class="fas fa-running mr-2"></i> Activities & Leadership
                        </h3>
                        <ul id="modal-activities" class="space-y-2">
                            <!-- Activities List -->
                        </ul>
                    </div>

                    <!-- Column 3: Campus Experience -->
                    <div>
                        <h3 class="text-xl font-bold text-blue-800 mb-3 pb-2 flex items-center border-b border-blue-50">
                            <i class="fas fa-school mr-2"></i> Campus Experience
                        </h3>
                        <div id="modal-ratings" class="space-y-3">
                            <!-- Ratings -->
                        </div>
                        
                        <div id="modal-exp-desc" class="mt-4 p-3 bg-gray-50 rounded-lg text-sm text-gray-600 italic whitespace-pre-line border-l-4 border-gray-200 hidden">
                            <!-- Description -->
                        </div>
                    </div>
                </div>

                <!-- Advice Section -->
                <div>
                    <div class="flex items-center mb-3">
                         <button 
                           onclick="alert('Voice memo feature coming soon!')"
                           class="bg-blue-800 hover:bg-blue-900 text-white font-bold py-2 px-4 rounded-full shadow-md transition-colors flex items-center"
                         >
                           <i class="fas fa-volume-up mr-2"></i>
                           Advice for Applying
                         </button>
                    </div>
                    <div class="bg-blue-50 rounded-xl p-6 border-l-4 border-blue-600">
                         <p id="modal-advice" class="text-gray-700 leading-relaxed whitespace-pre-line"></p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA ---
        const ALUMNI_DATA = [
          {
            id: 1,
            name: "Royce Brown",
            avatarColor: "#00693E",
            avatarUrl: "https://placehold.co/64x64/00693E/white?text=RB",
            chsClassYear: 2024,
            stats: { gpa: 4.68, act: null, sat: 1530 },
            starRating: 4.5,
            socials: { linkedin: "#", instagram: "#" },
            attending: { name: "Dartmouth College", major: "Economics & History" },
            recommenders: ["Mrs. Hargrove (APUSH teacher)", "Mr. Rauch (AP Biology teacher)"],
            activities: [
              "The Distinguished Graduate of 2024 (Valedictorian)",
              "4x Scholar Athlete",
              "3x Top Scholar",
              "Outstanding Senior in Social Studies",
              "Eagle Scout",
              "HiLite Editor-in-Chief",
              "Economics Club Team Captain",
              "Varsity Football Tight End & Track",
              "Wind Symphony I & Symphony Orchestra First Chair French Horn",
              "Rho Kappa",
              "Social Studies Peer Tutor Leader",
              "Superintendent and Principal Advisory Council",
              "GKOM",
              "NHS"
            ],
            advice: "Coming soon!",
            experience: { "Food": 4.8, "Weather": 3.8, "Rigor": 4, "Overall": 4.5 },
            experienceDescription: "Food is all-you-can-eat buffet style with new menus every day, 15 options per breakfast, lunch, dinner. Best cookies I've ever had.\n\nWeather: The most gorgeous fall you will ever see, but the winters are brutal. Rains often.\n\nRigor: Three course quarters, so very fast pace. Easy to get behind and exams are tough. B+ enforced medians for Econ and Gov classes.\n\nOverall: Great experience. Smaller than CHS, so very easy to make friends and run into people you know. Very relaxing campus and everywhere is a maximum 10 minute walk.",
            classRecommendations: null
          },
          {
            id: 2,
            name: "Srikrishna Ganesha",
            avatarColor: "#003262",
            avatarUrl: "https://placehold.co/64x64/003262/white?text=SG",
            chsClassYear: 2024,
            stats: { gpa: 4.63, act: null, sat: null },
            starRating: 4.6,
            socials: { linkedin: "#", instagram: "#" },
            attending: { name: "UC Berkeley", major: "Economics" },
            recommenders: ["Mrs. Hargrove (APUSH teacher)", "Mr. Anderson"],
            activities: [
              "Published economics research",
              "Co-President of Economics Club",
              "President of Carmel Esports",
              "DECA ICDC Finalist (8th)",
              "Carnegie Hall Finalist in Orchestra with tryouts"
            ],
            advice: "Colleges want to see someone who is an actual human and not an academic robot. For UC schools, use \"I statements\" and really detail your personal involvement. They allow for 20 activities so I honestly recommend throwing in some hobbies, because they want to see a genuine person that has a life along with their academics. I didn't get rejected from a single UC but my CommonApp must've been pretty bad because it felt less genuine (I paid for a college application consulting service and it made me feel like I was losing my voice in my prompts and activities. On the other hand, I did the UC ones by myself). For the UC app, make sure to fill up the word count in the activities section and show effort. I had a recurring theme for my essays about helping whatever communities I joined in some way, so maybe that helps. I do think the UC schools are big on community involvement. Also, don't stress too much about the college process because you will be successful no matter what if you have the right mindset. Not a single person that I know still remembers much of these details because college feels so distant from high school, and you learn a lot of life skills and mature a lot.",
            experience: { "Food": 3.7, "Weather": 4.9, "Rigor": 4.4, "Overall": 4.6 },
            experienceDescription: null,
            classRecommendations: null
          },
          {
            id: 3,
            name: "Alan Huang",
            avatarColor: "#8B0000",
            avatarUrl: "https://hilite.org/wp-content/uploads/2023/08/alan-huang-1200x697.jpg",
            chsClassYear: 2024,
            stats: { gpa: 4.60, act: null, sat: 1590 },
            starRating: 4.5,
            socials: { linkedin: "#", instagram: "#" },
            attending: { name: "Stanford University", major: "Computer Science" },
            recommenders: ["Mrs. Hargrove (APUSH teacher)", "Mr. Werkne (AP Stats teacher)", "Mr. McDonough (Counselor)"],
            activities: [
              "Computer Science Tutor (volunteer/paid)",
              "Founder of Deep Learning Club",
              "Create Code Challenge",
              "Esports League State Champion",
              "American Computer Science League",
              "National Chinese Honor Society"
            ],
            advice: "Just be yourself and put things you are genuinely interested in. I definitely agree that colleges/admissions officers can tell when you're truly passionate about something versus just doing it to look good. Basic tips: fill up word count and proofread a ton (get your friends, teachers, anyone you can get to look over it too) also apply obviously. Definitely try to form close bonds with teachers early on and have an idea of who you want to write your rec letters, because asking them last minute is really bad, and you need to give them stuff to write about. Also have some recurring themes, for me it was about how I want to help the community around me, whether it's by tutoring, hosting competitions, or volunteering and spreading my culture. Lastly, don't forget that everyone ends up where they belong in the end, i'm mainly speaking for myself but I think we all share similar sentiments that we feel like we really belong at our school and have a lot of fun, so don't stress too much, and remember to have fun sometimes.",
            experience: { "Food": 3.5, "Weather": 4, "Overall": 4.5 },
            experienceDescription: null,
            classRecommendations: "I recommend everyone to take APUSH and for aspiring CS majors to take AP CSA."
          },
          {
            id: 4,
            name: "Arjun Purohit",
            avatarColor: "#003DA5",
            avatarUrl: "https://hilite.org/wp-content/uploads/2023/08/arjun-purohit-1-1200x697.jpg",
            chsClassYear: 2024,
            stats: { gpa: 4.6, act: null, sat: null },
            starRating: 3.2,
            socials: { linkedin: "#", instagram: "#" },
            attending: { name: "Columbia University", major: "Linguistics & Computer Science" },
            recommenders: ["Mr. Rauch (AP Biology teacher)", "Mrs. Lee (Chinese teacher)"],
            activities: [
              "HiLite editor",
              "Esports League Captain & State Champion",
              "Founder of Biology Club",
              "Linguistics Club lecturer",
              "Linguistics blog",
              "Self-taught Japanese",
              "Hindi teacher",
              "AIME qualifier",
              "SciOly",
              "Data science internship",
              "Deep Learning Club",
              "National Chinese Honor Society"
            ],
            advice: "Start on your applications early, it's really nice to have most of your essays done early so you can just proofread closer to the deadline. Don't be afraid to ask for advice, but more importantly, don't be afraid to turn down suggestions if you feel like they don't match your style/voice. Try to tell a story with your essays that highlights your character and your passions, also think about what kind of values the colleges you're applying to value. Columbia, for example, likes people that are worldly and love knowledge for its own sake (you might get a sense of this from Columbia's emphasis on the 'core').",
            experience: { "Food": 3, "Weather": 3, "Rigor": 3.5 },
            experienceDescription: "The food doesn't matter too much because youâ€™re in NYC.",
            classRecommendations: null
          }
        ];

        // --- STATE & INIT ---
        let currentFilteredList = [...ALUMNI_DATA];
        let selectedPersonId = null;

        window.onload = () => {
            populateFilters();
            renderGrid(ALUMNI_DATA);
            showWelcomeModal();
            
            // Close modal logic on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeProfileModal();
                if (e.key === 'ArrowLeft') prevProfile();
                if (e.key === 'ArrowRight') nextProfile();
            });
        };

        // --- FILTER LOGIC ---
        function populateFilters() {
            const collegeSelect = document.getElementById('college-select');
            const majorSelect = document.getElementById('major-select');

            const colleges = new Set(ALUMNI_DATA.map(a => a.attending.name));
            const majors = new Set();
            
            // Split majors logic
            ALUMNI_DATA.forEach(a => {
                const split = a.attending.major.split('&').map(m => m.trim());
                split.forEach(m => majors.add(m));
            });

            Array.from(colleges).sort().forEach(c => {
                const opt = document.createElement('option');
                opt.value = c;
                opt.innerText = c;
                collegeSelect.appendChild(opt);
            });

            Array.from(majors).sort().forEach(m => {
                const opt = document.createElement('option');
                opt.value = m;
                opt.innerText = m;
                majorSelect.appendChild(opt);
            });
        }

        function filterAlumni() {
            const collegeVal = document.getElementById('college-select').value;
            const majorVal = document.getElementById('major-select').value;

            currentFilteredList = ALUMNI_DATA.filter(p => {
                const matchesCollege = collegeVal ? p.attending.name === collegeVal : true;
                const matchesMajor = majorVal 
                    ? p.attending.major.split('&').map(m => m.trim()).includes(majorVal)
                    : true;
                return matchesCollege && matchesMajor;
            });

            renderGrid(currentFilteredList);
            
            // Handle no results
            const noResults = document.getElementById('no-results');
            const grid = document.getElementById('alumni-grid');
            if (currentFilteredList.length === 0) {
                grid.classList.add('hidden');
                noResults.classList.remove('hidden');
            } else {
                grid.classList.remove('hidden');
                noResults.classList.add('hidden');
            }
        }

        function resetFilters() {
            document.getElementById('college-select').value = "";
            document.getElementById('major-select').value = "";
            filterAlumni();
        }

        // --- RENDER LOGIC ---
        function renderGrid(data) {
            const grid = document.getElementById('alumni-grid');
            grid.innerHTML = '';

            data.forEach((person, index) => {
                const initials = person.name.split(' ').map(n => n[0]).join('');
                
                const attendingHtml = person.attending ? 
                    `<p class="text-base font-semibold text-blue-800">${person.attending.name}</p>
                     <p class="text-sm text-gray-600">${person.attending.major}</p>` : 
                    `<p class="text-sm text-gray-400 italic">Decision Pending</p>`;

                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl p-0 shadow-sm person-card cursor-pointer flex flex-col items-stretch overflow-hidden animated-card';
                card.style.animationDelay = `${index * 50}ms`;
                card.onclick = () => openProfileModal(person.id);
                
                // Avatar logic
                let avatarHtml = '';
                if (person.avatarUrl && !person.avatarUrl.includes('placehold.co')) {
                    avatarHtml = `<img src="${person.avatarUrl}" alt="${person.name}" class="w-full h-full object-cover object-center" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                                  <span class="hidden w-full h-full flex items-center justify-center">${initials}</span>`;
                } else {
                    avatarHtml = `<span>${initials}</span>`;
                }

                card.innerHTML = `
                    <div class="w-full h-48 flex items-center justify-center text-6xl font-bold text-white relative overflow-hidden" style="background-color: ${person.avatarColor}">
                        ${avatarHtml}
                    </div>
                    <div class="p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-1">${person.name}</h2>
                        <p class="text-sm font-medium mb-3 text-blue-800">Class of ${person.chsClassYear}</p>
                        <div class="border-t border-gray-200 pt-3">
                            <p class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-1">Attending</p>
                            ${attendingHtml}
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- WELCOME MODAL ---
        function showWelcomeModal() {
            const modal = document.getElementById('welcome-modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => modal.classList.add('modal-show'), 10);
        }

        function closeWelcomeModal() {
            const modal = document.getElementById('welcome-modal');
            modal.classList.remove('modal-show');
            setTimeout(() => {
                modal.classList.remove('flex');
                modal.classList.add('hidden');
            }, 300);
        }

        // --- PROFILE MODAL ---
        function openProfileModal(id) {
            selectedPersonId = id;
            const person = ALUMNI_DATA.find(p => p.id === id);
            if (!person) return;

            // Populate Fields
            const initials = person.name.split(' ').map(n => n[0]).join('');
            const avatarContainer = document.getElementById('modal-avatar-container');
            avatarContainer.style.backgroundColor = person.avatarUrl ? 'transparent' : person.avatarColor;
            
            if (person.avatarUrl) {
                avatarContainer.innerHTML = `<img src="${person.avatarUrl}" class="w-full h-full object-cover object-center" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                                             <div class="w-full h-full absolute inset-0 flex items-center justify-center text-white font-bold text-2xl hidden" style="background-color: ${person.avatarColor}">${initials}</div>`;
            } else {
                avatarContainer.innerHTML = `<div class="w-full h-full flex items-center justify-center text-white font-bold text-2xl">${initials}</div>`;
            }

            document.getElementById('modal-name').innerText = person.name;
            document.getElementById('modal-college').innerText = person.attending.name;
            document.getElementById('modal-year').innerText = `(Class of ${person.chsClassYear})`;
            document.getElementById('modal-major').innerText = person.attending.major;
            
            // Stats
            document.getElementById('modal-gpa').innerText = person.stats.gpa ? person.stats.gpa.toFixed(2) : '-';
            document.getElementById('modal-test-label').innerText = person.stats.act ? 'ACT:' : 'SAT:';
            document.getElementById('modal-test-score').innerText = person.stats.act || person.stats.sat || '-';

            // Class Recs
            const recsBox = document.getElementById('modal-class-recs');
            if (person.classRecommendations) {
                recsBox.innerText = person.classRecommendations;
                recsBox.classList.remove('hidden');
            } else {
                recsBox.classList.add('hidden');
            }

            // Recommenders (Remove "teacher")
            const recList = document.getElementById('modal-recommenders');
            recList.innerHTML = person.recommenders.map(r => `
                <li class="flex items-start text-gray-700 text-sm md:text-base">
                    <i class="fas fa-user mr-2 mt-1 flex-shrink-0 text-blue-800"></i>
                    <span>${r.replace(/ teacher\)/gi, ')')}</span>
                </li>
            `).join('');

            // Activities
            const actList = document.getElementById('modal-activities');
            actList.innerHTML = person.activities.map(a => `
                <li class="flex items-start text-gray-700 text-sm md:text-base">
                    <i class="fas fa-check text-green-500 mr-2 mt-1 flex-shrink-0"></i>
                    <span>${a}</span>
                </li>
            `).join('');

            // Experience Ratings
            const ratingsDiv = document.getElementById('modal-ratings');
            ratingsDiv.innerHTML = Object.entries(person.experience).map(([key, val]) => {
                return `
                    <div class="py-1">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-gray-700 font-medium text-sm md:text-base">${key}:</span>
                            <span class="text-sm text-gray-500 font-medium">(${val.toFixed(1)})</span>
                        </div>
                        <div class="text-lg">${getStarHtml(val)}</div>
                    </div>
                `;
            }).join('');

            // Experience Description
            const descBox = document.getElementById('modal-exp-desc');
            if (person.experienceDescription) {
                descBox.innerText = person.experienceDescription;
                descBox.classList.remove('hidden');
            } else {
                descBox.classList.add('hidden');
            }

            // Advice
            document.getElementById('modal-advice').innerText = person.advice;

            // Nav State
            updateNavState();

            // Show
            const modal = document.getElementById('profile-modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => modal.classList.add('modal-show'), 10);
        }

        function closeProfileModal() {
            const modal = document.getElementById('profile-modal');
            modal.classList.remove('modal-show');
            setTimeout(() => {
                modal.classList.remove('flex');
                modal.classList.add('hidden');
                selectedPersonId = null;
            }, 300);
        }

        function handleClickOutside(e) {
            if (e.target.id === 'profile-modal') closeProfileModal();
        }

        function getStarHtml(rating) {
            const displayRating = Math.round(rating * 2) / 2;
            let html = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= displayRating) html += `<i class="fas fa-star text-amber-400"></i>`;
                else if (i - 0.5 === displayRating) html += `<i class="fas fa-star-half-alt text-amber-400"></i>`;
                else html += `<i class="far fa-star text-gray-300"></i>`;
            }
            return html;
        }

        // --- NAVIGATION ---
        function updateNavState() {
            const index = currentFilteredList.findIndex(p => p.id === selectedPersonId);
            const prevBtn = document.getElementById('nav-prev');
            const nextBtn = document.getElementById('nav-next');
            
            if (index <= 0) {
                prevBtn.classList.add('opacity-50', 'cursor-not-allowed');
                prevBtn.disabled = true;
            } else {
                prevBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                prevBtn.disabled = false;
            }

            if (index >= currentFilteredList.length - 1 || index === -1) {
                nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
                nextBtn.disabled = true;
            } else {
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                nextBtn.disabled = false;
            }
        }

        function prevProfile(e) {
            if(e) e.stopPropagation();
            const index = currentFilteredList.findIndex(p => p.id === selectedPersonId);
            if (index > 0) {
                openProfileModal(currentFilteredList[index - 1].id);
            }
        }

        function nextProfile(e) {
            if(e) e.stopPropagation();
            const index = currentFilteredList.findIndex(p => p.id === selectedPersonId);
            if (index < currentFilteredList.length - 1) {
                openProfileModal(currentFilteredList[index + 1].id);
            }
        }
    </script>
</body>
</html>
